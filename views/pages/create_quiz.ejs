<!DOCTYPE html>
<html>
<head>
	<title>N71</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<meta name="google-signin-client_id" content="567112201060-i34emibvl8p17rrgh1trctlgvn8n2o19.apps.googleusercontent.com"/>
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="js/main.js" defer ></script>
</head>

<body class=" w3-dark-gray">

  <nav class="w3-row w3-white w3-border">
    <div class="w3-half w3-text-blue w3-big  " style="">	
      <h3 class="w3-margin w3-button" onclick="location.href='/'">QUIZ<span class="w3-text-gray w3-small">pad</span></h3>
    </div>
    <div class="w3-quarter">
      <p class="w3-font w3-center w3-margin w3-big"><span class="w3-text-gray w3-small">Hello</span> <%= name %></p>
      
    </div>

    <div class="w3-quarter w3-text-cyan ">
      <button class="w3-button w3-round w3-card w3-margin w3-right w3-blue" onclick="composeQuestion();">
        <span class="w3-text-white w3-small">Add a</span> Question
      </button>
    </div>
  </nav>

  
	<div class=" w3-text-gray w3-light-gray w3-center  w3-round w3-card w3-border" style="width:80%;margin-left:auto;margin-right:auto;margin-top:20px">	
    <h2 class="w3-margin">Create new Quiz</h2>
    <input id="quiz_title" type="text" class=" w3-margin w3-padding w3-center" placeholder="Title of the quiz">
    
    <p class="w3-margin">Select Questions to be added in the quiz</p>
    <div style="max-height:50%;overflow-y:scroll">
    <%
    
    if(questions.length>0)
    { %>

      <% questions.forEach(function(q){ %>
      <div class="w3-border w3-margin">
        <div class=" w3-dark-gray w3-row w3-padding-large w3-round w3-card" id='<%= q._id %>' "> 
          <div class="w3-threequarter w3-padding" style="overflow: hidden;text-overflow: ellipsis"><span class="w3-text-gray w3-small"></span><%= q.description %> <span class="w3-text-light-gray w3-small"><br>@<%= q.timestamp %></span></div>
          <div class="w3-quarter w3-row ">
            <div class="w3-third w3-button w3-text-blue w3-hover-blue w3-hover-shadow w3-round" onclick="toggleOptions('options-<%= q._id %>')"><span class="w3-text-white w3-small">Options </span><i class="fas fa-arrow-down"></i></div>
            <div class="w3-third w3-button w3-text-red w3-hover-red w3-hover-shadow w3-round" onclick="deleteQuestion('<%= q._id %>')"><span class="w3-text-white w3-small">Delete </span><i class="fas fa-trash"></i></div>
            <div class="w3-third w3-button w3-text-green w3-hover-green w3-hover-shadow w3-round" onclick="toggleQuestionSelection('<%= q._id %>')"><span class="w3-text-white w3-small">Select </span><i class="fas fa-check"></i></div>
          </div>
        </div>

        <div id="options-<%= q._id %>" class="w3-padding w3-hide w3-dark-gray">
          <%var i=0; q.alternatives.forEach(function(a){ %>
            <p><%= ++i; %>)<%= a.text %> <% if(a.isCorrect){  %> <i class="fas fa-check-double"></i> <% } %></p>
            <%  }); %>
        </div>
      </div>
        <%  
      });
      %>
    </div>
      <button class="w3-button w3-margin w3-blue w3-round" onclick="attemptAddQuiz();">Done</button>
      <%

    }
      
    else{ %>

    <div class="w3-center">
      <p class="w3-center w3-round w3-text-gray w3-transparent">No questions yet,<br>Please create a Question to get started!!</p>
      <button class="w3-button w3-round w3-card w3-margin w3-blue" onclick="composeQuestion();">
        <span class="w3-text-white w3-small">Add a</span> Question
      </button>
    </div>

    <% }
    %>

	</div>

</body>
</html>

